---
phase: 01-foundation
plan: 01
type: execute
---

<objective>
Scaffold the ECOS project with Vite + React, Docker development environment, and Tailwind CSS configured with vanderdev.net design tokens.

Purpose: Establish the project structure, dependencies, and build tooling that all subsequent phases depend on.
Output: Working dev environment with `npm run dev` (hot reload) and `docker compose up` (containerized), Tailwind configured with the correct design system.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Design reference (read for exact tokens):**
@~/Documents/GitHub/vanderdev-website/tailwind.config.js
@~/Documents/GitHub/vanderdev-website/src/index.css
@~/Documents/GitHub/vanderdev-website/vite.config.js
@~/Documents/GitHub/vanderdev-website/package.json

**Tech stack:** React 18, Vite 5, Tailwind CSS 3, @tailwindcss/typography
**Established patterns:** vanderdev-website uses same stack — mirror its structure

**Key design tokens from vanderdev-website:**
- Background: #050505 (body), #0a0a0a (scrollbar track), #0b0b0b (cards)
- Accent: #f97316 (orange-500) — used for glows, active states, hover effects
- Text: #e5e5e5 (neutral-200)
- Borders: neutral-800
- Fonts: Inter (sans), JetBrains Mono (mono) via Google Fonts
- Effects: .glow-text (text-shadow), .glow-box (box-shadow with hover transition)
- Animations: fadeIn (0.3s ease-out, translateY), pulse-orange (2s)
- Custom scrollbar: dark track, #333 thumb, orange on hover

**Constraints:**
- Project lives in ECOS/ directory within vanderoffice/Automation repo
- Docker must use VIRTUAL_PATH=/ecosform label for future nginx-proxy routing
- Vite base path must be /ecosform/ for subpath deployment
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize React + Vite project with dependencies</name>
  <files>package.json, vite.config.js, postcss.config.js, tailwind.config.js, index.html, src/main.jsx, src/App.jsx, src/index.css, .gitignore</files>
  <action>
Create the project from scratch (do NOT use create-vite — scaffold manually for control):

1. **package.json**: name "ecos-form", type "module", scripts for dev/build/preview. Dependencies: react, react-dom, react-router-dom. DevDependencies: @vitejs/plugin-react, vite, tailwindcss, postcss, autoprefixer, @tailwindcss/typography.

2. **vite.config.js**: React plugin, base: '/ecosform/', outDir: 'dist', server port 5180 (avoid collision with vanderdev-website on 5173), server.host: true (for Docker).

3. **postcss.config.js**: tailwindcss + autoprefixer plugins.

4. **tailwind.config.js**: Content paths for index.html + src/**/*.{js,jsx}. Extend theme with:
   - fontFamily: sans ['Inter', 'sans-serif'], mono ['JetBrains Mono', 'monospace']
   - colors: brand object with bg: '#050505', card: '#0b0b0b', accent: '#f97316'
   - Plugin: @tailwindcss/typography

5. **index.html**: Root HTML with Google Fonts (Inter 400/500/600/700, JetBrains Mono 400/500), viewport meta, title "ECOS Security Agreement", div#root.

6. **src/main.jsx**: Standard React 18 createRoot rendering App.

7. **src/App.jsx**: Minimal placeholder — dark background div with "ECOS Security Agreement" heading in orange to prove Tailwind works.

8. **src/index.css**: Copy vanderdev-website's index.css wholesale (Tailwind directives, base body styles, scrollbar, glow effects, animations). This IS the design system foundation.

9. **.gitignore**: node_modules, dist, .env*, .DS_Store, *.local.

Do NOT install node_modules yet (Task 2 handles Docker).
  </action>
  <verify>All files exist with correct content. `cat package.json` shows correct deps. `cat tailwind.config.js` shows brand colors.</verify>
  <done>All 9 files created with correct content matching vanderdev.net design tokens.</done>
</task>

<task type="auto">
  <name>Task 2: Docker development environment</name>
  <files>Dockerfile, docker-compose.yml, .dockerignore</files>
  <action>
1. **Dockerfile** (multi-stage):
   - Stage 1 "deps": node:20-alpine, WORKDIR /app, copy package*.json, npm ci
   - Stage 2 "dev": FROM deps, copy all source, EXPOSE 5180, CMD ["npm", "run", "dev"]
   - Stage 3 "build": FROM deps, copy all source, npm run build
   - Stage 4 "production": nginx:alpine, copy --from=build /app/dist to /usr/share/nginx/html, copy a nginx.conf that handles SPA fallback with base path /ecosform/

2. **docker-compose.yml**:
   - Service "ecos-dev" for development: build context ., target "dev", ports 5180:5180, volumes ./src:/app/src (hot reload), volumes ./index.html:/app/index.html
   - Service "ecos-prod" for production preview: build context ., target "production", ports 8080:80, labels VIRTUAL_HOST=vanderdev.net, VIRTUAL_PATH=/ecosform, LETSENCRYPT_HOST=vanderdev.net
   - Do NOT add a network — nginx-proxy network is added at deploy time

3. **nginx.conf**: Listen 80, root /usr/share/nginx/html, location /ecosform/ with try_files and SPA fallback.

4. **.dockerignore**: node_modules, dist, .git, .planning, *.md (except README if we had one).

5. Run `npm install` locally (outside Docker) so the lockfile exists for Docker builds. Then verify `npm run dev` starts Vite and responds.
  </action>
  <verify>`npm run dev` starts without error and serves on port 5180. `curl -s http://localhost:5180/ecosform/ | head -5` returns HTML. Ctrl+C to stop.</verify>
  <done>Dev server runs, serves the placeholder app with correct Tailwind styling. Dockerfile has multi-stage build. docker-compose.yml has both dev and prod services with correct labels.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run dev` starts Vite dev server on port 5180 without errors
- [ ] Browser at localhost:5180/ecosform/ shows dark background (#050505) with orange heading
- [ ] Tailwind classes work (verify by inspecting rendered CSS)
- [ ] `npm run build` produces dist/ directory without errors
- [ ] Dockerfile and docker-compose.yml exist with multi-stage build and correct labels
</verification>

<success_criteria>

- All files created and functional
- Dev server runs with hot reload
- Tailwind configured with vanderdev.net design tokens
- Docker multi-stage build configured for dev and production
- Base path /ecosform/ works correctly in Vite config
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
